!function(e){var t={};function a(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(s,n,function(t){return e[t]}.bind(null,n));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";a.r(t);const s=(e=0,t=new Date)=>{let a=new Date(t.getTime());return Number.isInteger(e)&&0!==e&&a.setDate(a.getDate()+e),a},n=(e="")=>""===e?"":new Date(e.replace(/-/g,"/")).toDateString(),d=async(e=new Date)=>{const t=((e=new Date)=>{return e.getFullYear().toString()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)})(e);try{const e=await fetch(`http://statsapi.mlb.com/api/v1/schedule?hydrate=game(content(editorial(recap))),decisions&date=${t}&sportId=1`);return await e.json()}catch(e){return console.log(`We're sorry, no data is available at this time for your requested date ${t}.`)}},i=12,o=6,r="209px",c="118px",l="320px",u="180px",m=7,h="No Score",p="gamesContainer",g="captions",b="image",y="prevDate",f="nextDate",D="prevDate",I="gameDetails",x="modalHeadline",C="modalImage",w="modalSubheading",v="modalBlurb",E="modalContributors";var F=class{constructor(e,t){this.controller=e,this.rootElement=t,this.currentDate=new Date,this.currentIndex=0,this.maxIndex=-1,this.gamesMetadata=[],this.isModalDisplayed=!1,this.data=null,this.gridHasFocus=!1,this.buttonIdHasFocus=""}onCreate(){this.controller.requestData(this,"receiveStatsData","getStats",this.currentDate)}receiveStatsData(e){console.log("In display mod receiveStatsData(), result is:",e),this.data=e,this.buildDisplayModule()}buildDisplayModule(){if(!this.data)return;const e=document.getElementById(p);null!==e&&(e.parentNode.removeChild(e),this.gamesMetadata.splice(0,this.gamesMetadata.length));const t=document.createElement("div");t.id=p,t.classList.add("gamesContainer"),t.appendChild(this.buildDateButtons()),t.appendChild(this.buildHeader()),t.appendChild(this.buildGrid()),t.appendChild(this.buildDetailsModalDialog()),this.rootElement.appendChild(t),""===this.buttonIdHasFocus?this.addGridFocus():this.addDateButtonsFocus()}buildDateButtons(){const e=document.createElement("div");e.classList.add("dateButtons");const t=document.createElement("a");t.id=y;const a=document.createTextNode("< Previous Date");t.appendChild(a);const s=document.createElement("a");s.id=f;const n=document.createTextNode("Next Date >");return s.appendChild(n),e.appendChild(t),e.appendChild(s),e}buildHeader(){if(!this.data)return null;const e=document.createElement("h4");let t=null;if(0===this.data.totalGames)t=document.createTextNode("We're sorry, there is no data available for the date you requested.");else{let e=0;this.data.dates[0].games.forEach(t=>{t.content&&t.content.editorial&&t.content.editorial.recap&&t.content.editorial.recap.mlb&&e++});let a="recaps";1===e&&(a="recap"),t=document.createTextNode(`Stats for ${n(this.data.dates[0].date)}: ${this.data.totalGames} total games, ${e} editorial ${a} available`)}return e.appendChild(t),e}buildGrid(){if(!this.data||0===this.data.totalGames)return null;const e=document.createElement("div");e.classList.add("gamesRow"),this.currentIndex=0,this.maxIndex=this.data.totalGames-1;let t=-1;return this.data.dates[0].games.forEach(a=>{this.storeMetadata(a),t++;let s=document.createElement("div");s.id=`${g}${t}`,s.classList.add("gameCaptions","hiddenCaption");let n=document.createElement("p"),d=document.createTextNode(`${this.gamesMetadata[t].homeTeam.name}: ${this.gamesMetadata[t].homeTeam.score}`);n.appendChild(d),s.appendChild(n);let o=document.createElement("p"),r=document.createTextNode(`${this.gamesMetadata[t].awayTeam.name}: ${this.gamesMetadata[t].awayTeam.score}`);o.appendChild(r),s.appendChild(o);let c=document.createElement("div");if(c.classList.add("gameImage"),c.id=`${b}${t}`,a.content&&a.content.editorial&&a.content.editorial.recap&&a.content.editorial.recap.mlb&&a.content.editorial.recap.mlb.image&&a.content.editorial.recap.mlb.image.cuts){let e=a.content.editorial.recap.mlb.image.cuts[i].src,t=document.createElement("img");t.src=e,c.appendChild(t)}s.appendChild(c);let l=document.createElement("p");l.classList.add("desc");let u=document.createTextNode(this.gamesMetadata[t].headline);l.appendChild(u),s.appendChild(l),e.appendChild(s)}),e}buildDetailsModalDialog(){const e=document.createElement("div");e.id=I,e.classList.add("modal");const t=document.createElement("div");t.classList.add("modalContent"),e.appendChild(t);const a=document.createElement("h5");a.id=x,t.appendChild(a);const s=document.createElement("img");s.id=C;const n=document.createElement("p");n.id=w;const d=document.createElement("div");d.classList.add("modelImageSubheading"),d.appendChild(s),d.appendChild(n),t.appendChild(d);const i=document.createElement("p");i.id=v;const o=document.createElement("p");o.id=E;const r=document.createElement("div");r.classList.add("modalBlurbAuthors"),r.appendChild(i),r.appendChild(o),t.appendChild(r);const c=document.createElement("div");c.classList.add("escapeTip");const l=document.createElement("div");l.classList.add("escapeKey");const u=document.createTextNode("Esc");l.appendChild(u);const m=document.createTextNode("Press"),h=document.createTextNode("key to close dialog");return c.appendChild(m),c.appendChild(l),c.appendChild(h),r.appendChild(c),e}launchDetailsModalDialog(){const e=document.getElementById(x),t=document.getElementById(C),a=document.getElementById(w),s=document.getElementById(v),n=document.getElementById(E);for(;e.firstChild;)e.removeChild(e.firstChild);for(t.src="";a.firstChild;)a.removeChild(a.firstChild);for(;s.firstChild;)s.removeChild(s.firstChild);for(;n.firstChild;)n.removeChild(n.firstChild);const d=document.createTextNode(this.gamesMetadata[this.currentIndex].headline);e.appendChild(d),t.src=this.gamesMetadata[this.currentIndex].modalDialogImageUrl;const i=`${this.gamesMetadata[this.currentIndex].homeTeam.name}: ${this.gamesMetadata[this.currentIndex].homeTeam.score}`,o=`${this.gamesMetadata[this.currentIndex].awayTeam.name}: ${this.gamesMetadata[this.currentIndex].awayTeam.score}`,r=document.createTextNode(`${i} / ${o}`);a.appendChild(r);const c=document.createTextNode(this.gamesMetadata[this.currentIndex].blurb);s.appendChild(c);const l=document.createTextNode(`-- ${this.gamesMetadata[this.currentIndex].contributors}`);n.appendChild(l),document.getElementById(I).style.display="block",this.isModalDisplayed=!0}storeMetadata(e){let t={homeTeam:{name:"",score:""},awayTeam:{name:"",score:""},headline:"",modalDialogImageUrl:"",blurb:"",contributors:""};if(e.teams&&e.teams.home&&e.teams.home.team&&e.teams.home.team.name&&(t.homeTeam.name=e.teams.home.team.name),e.teams&&e.teams.home&&(void 0!==e.teams.home.score?t.homeTeam.score=e.teams.home.score:t.homeTeam.score=h),e.teams&&e.teams.away&&e.teams.away.team&&e.teams.away.team.name&&(t.awayTeam.name=e.teams.away.team.name),e.teams&&e.teams.away&&void 0!==e.teams.away.score&&(t.awayTeam.score=e.teams.away.score),e.teams&&e.teams.away&&(void 0!==e.teams.away.score?t.awayTeam.score=e.teams.away.score:t.awayTeam.score=h),e.content&&e.content.editorial&&e.content.editorial.recap&&e.content.editorial.recap.mlb&&e.content.editorial.recap.mlb.headline&&(t.headline=e.content.editorial.recap.mlb.headline),e.content&&e.content.editorial&&e.content.editorial.recap&&e.content.editorial.recap.mlb&&e.content.editorial.recap.mlb.image&&e.content.editorial.recap.mlb.image.cuts&&(t.modalDialogImageUrl=e.content.editorial.recap.mlb.image.cuts[o].src),e.content&&e.content.editorial&&e.content.editorial.recap&&e.content.editorial.recap.mlb&&e.content.editorial.recap.mlb.blurb&&(t.blurb=`${e.content.editorial.recap.mlb.blurb}...`),e.content&&e.content.editorial&&e.content.editorial.recap&&e.content.editorial.recap.mlb&&e.content.editorial.recap.mlb.contributors){let a=e.content.editorial.recap.mlb.contributors.map(e=>e.name);t.contributors=a.join(", ")}this.gamesMetadata.push(t)}onKeyPress(e){if(this.isModalDisplayed&&"Escape"!==e)return!1;switch(e){case"ArrowLeft":if(this.gridHasFocus){if(0===this.currentIndex)return!1;this.updateGridFocus(e)}else{if(this.buttonIdHasFocus===y)return!1;this.updateDateButtonsFocus(e)}break;case"ArrowRight":if(this.gridHasFocus){if(this.currentIndex===this.maxIndex)return!1;this.updateGridFocus(e)}else{if(this.buttonIdHasFocus===f)return!1;this.updateDateButtonsFocus(e)}break;case"ArrowUp":if(!this.gridHasFocus)return!1;this.currentIndex-m>=0?this.updateGridFocus(e):(this.updateGridFocus(e,!0),this.updateDateButtonsFocus(e));break;case"ArrowDown":if(this.gridHasFocus){if(!(this.currentIndex+m<=this.maxIndex))return!1;this.updateGridFocus(e)}else this.updateDateButtonsFocus(e),this.updateGridFocus(e);break;case"Enter":if(this.gridHasFocus)this.launchDetailsModalDialog();else if(this.buttonIdHasFocus===y){const e=-1;this.currentDate=s(e,this.currentDate),this.controller.requestData(this,"receiveStatsData","getStats",this.currentDate)}else if(this.buttonIdHasFocus===f){const e=1;this.currentDate=s(e,this.currentDate),this.controller.requestData(this,"receiveStatsData","getStats",this.currentDate)}break;case"Escape":this.isModalDisplayed&&(document.getElementById(I).style.display="none",this.isModalDisplayed=!1);break;default:return!1}}updateGridFocus(e,t=!1){let a=null;switch(e){case"ArrowLeft":a=this.currentIndex-1;break;case"ArrowRight":a=this.currentIndex+1;break;case"ArrowUp":!1===t&&(a=this.currentIndex-m);break;case"ArrowDown":a=this.gridHasFocus?this.currentIndex+m:this.currentIndex;break;default:return!1}this.removeGridFocus(),null!==a&&(this.currentIndex=a,this.addGridFocus())}removeGridFocus(){if(!1===this.gridHasFocus)return;document.getElementById(`${g}${this.currentIndex}`).classList.add("hiddenCaption");let e=document.getElementById(`${b}${this.currentIndex}`);e.style.width=r,e.style.height=c,e.style.removeProperty("border"),e.nextSibling.style.width=r,this.gridHasFocus=!1}addGridFocus(){document.getElementById(`${g}${this.currentIndex}`).classList.remove("hiddenCaption");let e=document.getElementById(`${b}${this.currentIndex}`);e.style.width=l,e.style.height=u,e.style.border="solid 5px red",e.nextSibling.style.width=l,this.gridHasFocus=!0}updateDateButtonsFocus(e){let t=null;switch(e){case"ArrowLeft":t=y;break;case"ArrowRight":t=f;break;case"ArrowUp":t=D;break;case"ArrowDown":break;default:return!1}this.removeDateButtonsFocus(),null!==t&&(this.buttonIdHasFocus=t,this.addDateButtonsFocus())}removeDateButtonsFocus(){""!==this.buttonIdHasFocus&&(document.getElementById(this.buttonIdHasFocus).style.removeProperty("border"),this.buttonIdHasFocus="")}addDateButtonsFocus(){document.getElementById(this.buttonIdHasFocus).style.border="solid 5px red"}getIndexFromId(e){return new Number(e.replace(/\D/g,"")).valueOf()}};new class{constructor(){this.dataMods=new Map,this.loadDataMods(),this.launchDisplayMods()}establishRootElement(){const e=document.createElement("div");return e.id="root",e.classList.add("bgImage"),document.body.appendChild(e),e}loadDataMods(){this.dataMods.set("getStats",d)}requestData(e,t,a,...s){(async()=>{const n=await this.dataMods.get(a).apply(this,s);e[t](n)})().catch(e=>console.error(e))}launchDisplayMods(){const e=this.establishRootElement();let t=new F(this,e);t.onCreate(),this.passKeyPressesToDisplayMod(t)}passKeyPressesToDisplayMod(e){document.addEventListener("keydown",function(t){t.preventDefault(),e.onKeyPress(t.key)}),document.addEventListener("keypress",function(t){t.preventDefault(),e.onKeyPress(t.key)})}}}]);